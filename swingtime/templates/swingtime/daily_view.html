{% extends "swingtime/swingtime_base.html" %}
{% block title %}Daily View{% endblock %}
{% block main_content %}
    <h3 class="margin-top-10">Daily View</h3>
    <h4 class="margin-top-10">
        <a class="plain" href="{% url 'swingtime-daily-view' prev_day.year prev_day.month prev_day.day %}">&larr;</a>
        {{ day|date:"l, N jS Y" }}
        <a class="plain" href="{% url 'swingtime-daily-view' next_day.year next_day.month next_day.day %}">&rarr;</a>
    </h4>

{%if con%}

<div class="dropdown argin-top-10">
<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
  Locations
  <span class="caret"></span>
</button>
<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">

  <li role="presentation"><a href="{% url 'swingtime-daily-view' day.year day.month day.day %}"><b>All Locations</b></a></li>
      <li role="separator" class="divider"></li>
  {%for item in con.get_locations%}
  <li role="presentation">
    <a href="{% url 'swingtime-daily-location-view' item.pk day.year day.month day.day %}">
      {{item.abbrv}}</a></li>{%endfor%}
</ul>
</div>

     <table class="calendar table-striped margin-top-15">
      <!-- <table class="table table-striped">-->
        <thead class="swingtime-th">
            <tr class="swingtime-tr">
                <th class="swingtime-th">Time</th>
                {%for location in locations%}
                <th class="swingtime-th" style="text-align:center; width:{{maxwidth}}%;">
                  {%if location.abbrv%}{{location.abbrv}}{%else%}{{location}}{%endif%}</th>
                {%endfor%}
            </tr>
        </thead>
        <tbody>
            {% for tm,cells in timeslots %}
            <tr class="swingtime-tr">
                <th class="swingtime-th"
                {%if locations|length > 1 %}style="width:{{maxwidth}}%;"
                {%else%}style="width:10%;"{%endif%}><b>{{ tm|date:"P" }}</b></th>
                {% for cell in cells %}
                {%if cell%}
                <td{% if cell.event_class %} class="{{cell.event_class}} swingtime-td" rowspan="{{cell.rowspan}}"{%else %} class="swingtime-td" {% endif %} style="text-align:center; width:{{maxwidth}}%;">
                {% autoescape off %}
                    {{ cell }}
                {% endautoescape %}

                <!-- {% if not cell.event_class %}
                <a href="{% url 'swingtime-add-event' %}?dtstart={{ tm.isoformat }}">+</a>
                {%endif%} -->
              </td>
                {%endif%}
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>

{%else%}
{% include "no_con.html" %}
{%endif%}

{% endblock %}
