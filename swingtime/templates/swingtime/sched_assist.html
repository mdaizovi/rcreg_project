{% extends "swingtime/swingtime_base.html" %}
{% block title %}Schedule Assistant{% endblock %}


{% block main_content %}
<div class="row">
  {%if not act%}
  <div class="alert alert-danger" role="alert">This Activity does not exist. Please contact the<a href="mailto:{{CUSTOM_SITE_ADMIN_EMAIL}}" class="alert-link"> site administrator </a>if you believe this is the result of an error.</div>
{%else%}
<div class="col-sm-12">
    <h3 class="margin-top-10 text-center">Schedule Assistant: <b>{{act.name}}</b></h3>

    <div class="col-sm-6">
      <div class="well well-lg">
      <ul style="font-size: 17px;"><li>Default filter is <b><a href="{{act.get_sched_assist_url}}">Level 1</a></b>, which means that you see only timeslots that have no conflicts and are an exact interest-level match.</li>
  <li>A <b><a href="{{act.get_sched_assist_url}}?level=2">Level 2</a></b> search will allow non-figurehead conflicts and timeslots that are +/- interest level away. <i>(Please make sure activity has an interest level)</i></li>
      <li>A <b><a href="{{act.get_sched_assist_url}}?level=3">Level 3</a></b> search will show all possible timeslots.</li></ul>
      <b>NOTE to self done interest and conflicts but not duration</b>
    </div>
  </div>
      <div class="col-sm-6">
        <div class="well">
          <form method="POST" class="post-form">
          {% csrf_token %}
          {{form}}
            <button type="submit" name="save_activity" class="btn btn-success margin-top-10 center-block">Save</button>
          </form>
      </div>
  </div>
</div>


{%for slotdict in slots %}
<div class="col-sm-6 margin-top-10">
    <h3 class="text-center">{%cycle "Empty" "Possible" %} Timeslots<br>
      <small>{%cycle "These Slots have been created but don't have an Activity designated" "These Slots have NOT been created but could be" %}
</small></h3>
<table class="table table-striped">
  <tr><th>Date</th><th>Start</th><th>End</th><th>Location</th><th>Interest<br>Level</th><th style="text-align:center;">Conflict<br>Score</th></tr>
{%for k,v  in slotdict.iteritems %}
{%for o in v%}
<tr><td>{{ o.start_time|date:"D d" }}</td><td>{{ o.start_time|date:"f a" }}</td><td>{{ o.end_time|date:"f a" }}</td>
  <td>{%if o.location.abbrv%}{{o.location.abbrv}}{%else%}{{o.location.name}}{%endif%}</td><td>{{ o.interest }}</td>
  <td style="text-align:center;">
    <a href="{% url 'swingtime-occurrence' o.pk %}?{%if training%}training={{training.pk}}{%elif challenge%}challenge={{challenge.pk}}{%endif%}">{{k}}</a></td></tr>

{%endfor%}
{%endfor%}
</table>
{%cycle "" "I've temporarily disabled this part while I work on it to make faster and better. Or maybe you don't need it?" %}
</div><!-- end col-sm-6 possible timeslots-->
{%endfor%}

{%endif%}
</div><!-- end row-->
{% endblock %}
